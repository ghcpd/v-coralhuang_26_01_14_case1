User: # Agent Prompt - Issue #70: Need disable/enable mobile browser agents

## Background

You will be working with an existing version of the fake-useragent library (code in the src/ folder). The core functionality of this library is to return User-Agent strings from a built-in list based on specified conditions, primarily used in web scraping projects to simulate different browser access.

**Current Problems**:
- Users cannot specify to get UAs only from specific device platforms (PC, mobile, tablet)
- Users cannot specify minimum browser version requirements (e.g., Chrome 120+ only)

This causes inconvenience in certain scenarios (e.g., avoiding PC/Mobile redirects, requiring new browser features, etc.).

## Task Objectives

Add two filtering features to the existing codebase while **maintaining backward compatibility**:

### Feature 1: Platform Filtering (platforms parameter)
Allow users to specify device platform types (PC/mobile/tablet) and return only matching UAs.

Requirements:
- Support platform types: `"pc"` (desktop), `"mobile"` (mobile devices), `"tablet"` (tablets)
- Accept string or list input
- Default includes all platforms

### Feature 2: Minimum Browser Version Filtering (min_version parameter)
Allow users to specify a minimum browser version and filter out UAs below that version.

Requirements:
- Support integer or float input
- Use `>=` comparison rule
- Default no filtering (0.0)

## Implementation Hints

1. **Analyze existing code**:
   - Review data file structure (data/browsers.json) to understand available fields
   - Understand existing filtering logic and parameter handling
   - Note repetitive patterns in the code

2. **Data source**:
   - UA data is in structured JSON format
   - Check data file to determine how to identify platform types and version information

3. **Code quality**:
   - Eliminate code duplication
   - Maintain consistency with existing code style
   - Appropriate parameter validation and type handling

## Core Requirements

### 1. API Design
- Add two optional parameters `min_version` and `platforms` to the `FakeUserAgent` class
- Parameters must have reasonable default values to ensure unchanged behavior when not passed
- Support flexible input formats (e.g., platforms supports string or list)
- Extend default OS list to include mobile platforms

### 2. Filtering Implementation
- Add platform and version filtering conditions to existing filtering logic
- Refactor code to eliminate duplicate filtering logic
- Ensure multiple filtering conditions can be correctly combined

### 3. Compatibility
- Do not break existing API and method signatures
- Maintain original error handling mechanisms
- Behavior when filtering results are empty should be consistent with existing logic

## Testing Requirements

Add test cases in `test_fake.py` covering at least:

1. **Basic functionality**:
   - Platform filtering works correctly
   - Version filtering works correctly
   - Combined filtering works correctly

2. **Parameter flexibility**:
   - platforms supports string and list input
   - min_version supports integer and float input

3. **Backward compatibility**:
   - Library works normally when new parameters are not passed
   - Existing functionality is not affected

## Deliverables

After completing the implementation, submit the following files:

1. **Modified code files**:
   - `fake.py` - Implement new features
   - `test_fake.py` - Add test cases

2. **Documentation files** (new):
   - `README.md` - Explain how to use the new features, including:
     * Feature overview
     * Parameter descriptions (platforms and min_version)
     * Usage examples (at least 3 scenarios)
     * Notes and caveats

3. **Test scripts** (new):
   - `run_tests.sh` (Linux/Mac) and/or `run_tests.bat` (Windows)
   - One-click script to run tests
   - If tests require additional dependencies (e.g., pytest), provide `requirements.txt` and install dependencies in the script first
   - Ensure executable in any clean Python environment

## Constraints

1. **Backward compatibility**: All new parameters must be optional, behavior unchanged when not passed
2. **Use existing data**: Implement based on existing data file structure, do not modify data format
3. **Code style**: Follow existing code style and conventions
4. **Do not modify core logic**: Preserve existing parameters and error handling mechanisms
5. **Independent work**: Implement independently based on code in src/ folder

## Success Criteria

After completion, should support the following use cases:

1. **Mobile filtering**: Get only mobile device UAs (for mobile web scraping)
2. **Version filtering**: Get only UAs with browsers above specific versions (for scenarios requiring new features)
3. **Combined filtering**: Precise filtering with multiple conditions combined
4. **Backward compatibility**: Maintain original behavior when new parameters are not passed
5. **Tests pass**: All new test cases pass
6. **One-click testing**: Quick functionality verification through run_tests script


GitHub Copilot: Optimizing tool selection...I'll inspect the project files to find where to add the new parameters and tests.

Searched for files matching `**/*.py`, 7 matches

Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/fake.py)

Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/settings.py)

Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/data/browsers.json)

Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/test_fake.py)

Perfect — I'll add the filtering logic and tests, plus README and test scripts.

Using "Replace String in File"


```

```


Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/fake.py)

Using "Replace String in File"


```

```


Using "Replace String in File"


```

```


Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/fake.py)

Using "Replace String in File"


```

```


Using "Replace String in File"


```

```


Created [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/README.md)

Created [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/requirements.txt)

Created [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/run_tests.bat)

Created [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/run_tests.sh)

Discovering tests...

0/0 tests passed (0.00%)

Ran terminal command: python -m pip install -r requirements.txt; python -m pytest -q

Configuring a Python Environment
Completed with input: {
  "resourcePath": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430"
}

Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "codeSnippet": "import sys, subprocess\nsubprocess.check_call([sys.executable, '-m', 'pip', 'install', '-r', 'requirements.txt'])\nsubprocess.check_call([sys.executable, '-m', 'pytest', '-q'])",
  "workingDirectory": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "timeout": 120000
}

Read [](file:///c%3A/Bug_Bash/26_01_14/oswe-mini-m23a3s430/src/__init__.py)

Using "Replace String in File"


```

```


Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "codeSnippet": "import sys, subprocess\nsubprocess.check_call([sys.executable, '-m', 'pytest', '-q'])",
  "workingDirectory": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "timeout": 120000
}

Using "Replace String in File"


```

```


Continue to iterate?
[object Object]

Made changes.

User: @agent Continue: "Continue to iterate?"

GitHub Copilot: Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "codeSnippet": "import sys, subprocess\nsubprocess.check_call([sys.executable, '-m', 'pytest', '-q'])",
  "workingDirectory": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "timeout": 120000
}

Using "Replace String in File"


```

```


Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "codeSnippet": "import sys, subprocess\nsubprocess.check_call([sys.executable, '-m', 'pytest', '-q'])",
  "workingDirectory": "c:\\Bug_Bash\\26_01_14\\oswe-mini-m23a3s430",
  "timeout": 120000
}

Perfect — I added platform and min-version filters, tests, docs and test scripts, and ran the test suite.

Files changed/added:
- Modified: fake.py (added `platforms` + `min_version`, refactored filtering)
- Modified: test_fake.py (new tests for platforms/min_version, adjusted imports)
- Modified: __init__.py (use relative import)
- Added: README.md, requirements.txt, run_tests.bat, run_tests.sh

✅ Tests: 16 passed (ran pytest).

Made changes.